<ion-view class="bar-positive" view-title="老人列表">
    <ion-nav-buttons side="right">
        <button class="button button-balanced" ng-click="vm.save()" ng-if="vm.blnShift">
            交班
        </button>
    </ion-nav-buttons>
   <ion-content>

       <div class="row row-wrap" >
           <div class="col" ng-repeat="item in vm.scheduleList" style="text-align: center;border:1px solid #e0e0e0;font-weight: 800;{{item.style}}" ng-click="vm.changeShift({{item.scheduleId}})">
               {{item.scheduleName}}
            </div>
       </div>
       <div class="item-input item-button-right" ng-if="vm.sear">
           <label class="item-input-wrapper" style="margin-right: 80px;">
               <i class="icon ion-ios-search placeholder-icon"></i>
               <input type="search" placeholder="老人姓名/床位/身份证号" ng-model="vm.searchContent">
           </label>
           <button class="button button-light" ng-click="vm.search()">
               查询
           </button>
       </div>
       <ion-item class="item"
                 ng-if="vm.noData">
           <h2>没有查询到数据</h2>
       </ion-item>
       <ion-refresher pulling-text="下拉刷新" on-refresh="vm.doRefresh()"></ion-refresher>
       <ion-list>
           <ion-item class="item-avatar item-text-wrap item-icon-right"
                     ng-repeat="item in vm.personList"
                     ui-sref="{{vm.state}}({memberId:{{item.memberId}},accessDiv:{{vm.accessDiv}},staffScheduleId:{{vm.staffScheduleId}},infos:item })">
                <img ng-src="{{item.avatarPath}}" >
               <div class="row row-wrap"style="margin-top: 0px;">
                   <div class="col-60">
                       <h2>{{item.personName}}</h2>
                       <h3 style="margin-top: 5px;color: #8e8e8e;">年龄：{{item.age}}</h3>
                   </div>
                   <div class="col-40"  style="width:100%;text-align: right">
                       <div style="width: 30px;height: 30px;background-color: #90dcea;border-radius: 25px;float: right">
                           <span style="height: 30px;line-height: 30px;display: block;color:#FFFFFF;text-align: center;font-weight: 800;margin-left: 1px;">{{item.statusText}}</span>
                       </div>
                       <div style="width: 30px;height: 30px;background-color: #f0d39b;border-radius: 25px;float: right" ng-if="item.shiftMemo">
                           <span style="height: 30px;line-height: 30px;display: block;color:#FFFFFF;text-align: center;font-weight: 800;margin-right: 1px;margin-left: 1px;">注</span>
                       </div>

                   </div>
               </div>
               <div class="row"style="height: 25px;margin-top: 0px;">
                   <div class="col-100">
                    <h3 style="color: #8e8e8e;">床位：{{item.bedNo}}</h3>
                   </div>
               </div>

               <i class="icon ion-chevron-right icon-accessory"></i>
           </ion-item>
       </ion-list>

       <ion-infinite-scroll ng-if="vm.moredata" on-infinite="vm.loadMore()" distance="1%" ></ion-infinite-scroll>

   </ion-content>

</ion-view>
